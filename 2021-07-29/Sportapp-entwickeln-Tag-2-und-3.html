<!DOCTYPE html>
<html lang="de">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Sportapp Tag #2 und 3 | Irgendwas passiert hier doch</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Sportapp Tag #2 und 3" />
<meta name="author" content="Florian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Was habe ich mir da nur vorgenommen? Ohne großartige Erfahrungen im Bereich App-Entwicklung direkt ein Projekt in einer bestimmten Zeitspanne abarbeiten? Nach gefühlten Tagen YouTube Videos schauen, um überhaupt ein Gefühl dafür zu bekommen, was alles möglich ist und wie es umzusetzen wäre, habe ich nun mit dem eigentlichen Projekt begonnen." />
<meta property="og:description" content="Was habe ich mir da nur vorgenommen? Ohne großartige Erfahrungen im Bereich App-Entwicklung direkt ein Projekt in einer bestimmten Zeitspanne abarbeiten? Nach gefühlten Tagen YouTube Videos schauen, um überhaupt ein Gefühl dafür zu bekommen, was alles möglich ist und wie es umzusetzen wäre, habe ich nun mit dem eigentlichen Projekt begonnen." />
<link rel="canonical" href="blog.floriansymmank.de/2021-07-29/Sportapp-entwickeln-Tag-2-und-3" />
<meta property="og:url" content="blog.floriansymmank.de/2021-07-29/Sportapp-entwickeln-Tag-2-und-3" />
<meta property="og:site_name" content="Irgendwas passiert hier doch" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-29T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sportapp Tag #2 und 3" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Florian"},"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"blog.floriansymmank.de/2021-07-29/Sportapp-entwickeln-Tag-2-und-3"},"url":"blog.floriansymmank.de/2021-07-29/Sportapp-entwickeln-Tag-2-und-3","headline":"Sportapp Tag #2 und 3","dateModified":"2021-07-29T00:00:00+02:00","datePublished":"2021-07-29T00:00:00+02:00","description":"Was habe ich mir da nur vorgenommen? Ohne großartige Erfahrungen im Bereich App-Entwicklung direkt ein Projekt in einer bestimmten Zeitspanne abarbeiten? Nach gefühlten Tagen YouTube Videos schauen, um überhaupt ein Gefühl dafür zu bekommen, was alles möglich ist und wie es umzusetzen wäre, habe ich nun mit dem eigentlichen Projekt begonnen.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="blog.floriansymmank.de/feed.xml" title="Irgendwas passiert hier doch" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">Irgendwas passiert hier doch</h2>
    </a>
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/tags">Tags</a></li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>
</nav>


    <main>
      <div class="post">
  <div class="post-info">
    <span>Von</span>
    
        Florian
    

    
      <br>
      <span>am&nbsp;</span>
	  <time datetime="2021-07-29 00:00:00 +0200">29
	  
	  Juli
	  2021
	  </time>
	 
  </div>

  <h1 class="post-title">Sportapp Tag #2 und 3</h1>
  <div class="post-line"></div>

  <p>Was habe ich mir da nur vorgenommen? Ohne großartige Erfahrungen im Bereich App-Entwicklung direkt ein Projekt in einer bestimmten Zeitspanne abarbeiten? Nach gefühlten Tagen YouTube Videos schauen, um überhaupt ein Gefühl dafür zu bekommen, was alles möglich ist und wie es umzusetzen wäre, habe ich nun mit dem eigentlichen Projekt begonnen.</p>

<p>Vorweg ist es wichtig zu Wissen, wie das <strong>Model View ViewModel (MVVM)</strong> design pattern funktioniert, da es sich durch das gesamte Projekt ziehen wird.</p>

<p><img src="/assets/images/AndroidAppReal/MVVMPattern.png" alt="1_menuStruktur" /><a href="https://de.wikipedia.org/wiki/Model_View_ViewModel" target="_blank">Source: Wikipedia</a></p>

<p>Das Muster wird dazu verwendet, um die Darstellung und die Geschäftslogik voneinander zu trennen, außerdem vereinfacht es die Implementation von Tests.</p>

<p>Das <strong>Model</strong> ist hierbei für die gesamte Geschäftslogik zuständig und enthält die Daten, die dem Nutzer angezeigt werden sollen. Beispielsweise:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Exercise</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">description</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSomething</span><span class="o">(){</span>
        <span class="c1">// ... </span>
    <span class="o">}</span>
    
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Im <strong>ViewModel</strong> wird die Verbindung zwischen Model und View hergestellt, indem es dem View die benötigten Daten, Funktionen und Services (wie z. B. Datenbankzugriff) zu Verfügungen stellt. Wichtig hierbei ist, dass das ViewModel keinem View direkt zugeordnet ist. Beispielsweise:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExercisesViewModel</span> <span class="kd">extends</span> <span class="nc">AndroidViewModel</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">IDatabase</span> <span class="n">databaseContext</span><span class="o">;</span>
     
    <span class="kd">public</span> <span class="nf">ExercisesViewModel</span><span class="o">(</span><span class="nc">Application</span> <span class="n">application</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">application</span><span class="o">);</span>
        <span class="n">databaseContext</span> <span class="o">=</span> <span class="nc">MockDatabase</span><span class="o">.</span><span class="na">getDBinstance</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Exercise</span><span class="o">&gt;</span> <span class="nf">getAllExercisesList</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">databaseContext</span><span class="o">.</span><span class="na">exerciseDAO</span><span class="o">().</span><span class="na">getAllExercisesList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertExercise</span><span class="o">(</span><span class="nc">Exercise</span> <span class="n">exercise</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">databaseContext</span><span class="o">.</span><span class="na">exerciseDAO</span><span class="o">().</span><span class="na">insertExercise</span><span class="o">(</span><span class="n">exercise</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateExercise</span><span class="o">(</span><span class="nc">Exercise</span> <span class="n">exercise</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">databaseContext</span><span class="o">.</span><span class="na">exerciseDAO</span><span class="o">().</span><span class="na">updateExercise</span><span class="o">(</span><span class="n">exercise</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteExercise</span><span class="o">(</span><span class="nc">Exercise</span> <span class="n">exercise</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">databaseContext</span><span class="o">.</span><span class="na">exerciseDAO</span><span class="o">().</span><span class="na">deleteExercise</span><span class="o">(</span><span class="n">exercise</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Das <strong>View</strong> enthält alle graphischen Elementen also das GUI und nutzt das ViewModel um die Nutzereingaben weiterzuleiten. Es enthält auch Programmlogik für das GUI. In Android Apps ist das View in eine XML und eine Java-Datei geteilt. Die XML Datei, ähnlich einer HTML, enthält die graphischen Elemente, die Java-Datei den Code-Behind Teil. Außerdem gibt es hier zwei verschiedene Wege, um ein View zu erstellen. Es gibt <em>Activity</em> und <em>Fragment</em> welche sich darin unterscheiden, das ein Activity aus mehreren Fragments bestehen kann also quasi Unterfenster sind.</p>

<p>Das genutzte <em>constraintlayout</em> kann durch Verkettung der Elemente ihre Position bestimmen. Im folgenden Beispiel XML-Teil habe ich ein paar Elemente und die Platzierung der Elemente entfernt da es sonst zu viel wäre.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">tools:context=</span><span class="s">".ui.exercises.changeExerciseActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/lblExerciseName"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"Name"</span> 
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span> 
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- so kann Platziert werden --&gt;</span> 
    
    <span class="nt">&lt;EditText</span>
        <span class="na">android:id=</span><span class="s">"@+id/etExerciseName"</span>
        <span class="na">android:hint=</span><span class="s">"Übungsname"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:inputType=</span><span class="s">"textPersonName"</span> <span class="nt">/&gt;</span>
    
     <span class="nt">&lt;ImageView</span>
        <span class="na">android:id=</span><span class="s">"@+id/imPlaceholder"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">tools:srcCompat=</span><span class="s">"@tools:sample/avatars"</span> <span class="nt">/&gt;</span>
    
    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">"@+id/btnNewImg"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"Neues Bild\n Hinzufügen"</span> <span class="nt">/&gt;</span>

    <span class="c">&lt;!-- restliche Elemente ... --&gt;</span>
    
<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></div></div>

<p>Hier der Code-Behind aus der Java-Datei:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">changeExerciseActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="o">{</span>

    <span class="nc">Exercise</span> <span class="n">exercise</span><span class="o">;</span>
    <span class="nc">IDatabase</span> <span class="n">databaseContext</span><span class="o">;</span>
    <span class="nc">ExercisesViewModel</span> <span class="n">exercisesViewModel</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">exerciseID</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_change_exercise</span><span class="o">);</span>
    	<span class="n">getSupportActionBar</span><span class="o">().</span><span class="na">setTitle</span><span class="o">(</span><span class="s">"Übung"</span><span class="o">);</span>
        <span class="n">getSupportActionBar</span><span class="o">().</span><span class="na">setDisplayHomeAsUpEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">exerciseID</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">().</span><span class="na">getIntExtra</span><span class="o">(</span><span class="s">"exerciseID"</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>

        <span class="c1">// finden der GUI Elemente</span>
        <span class="nc">EditText</span> <span class="n">etExerciseName</span> <span class="o">=</span> <span class="o">(</span><span class="nc">EditText</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">etExerciseName</span><span class="o">);</span>
        <span class="c1">// ...</span>
        
        <span class="n">exercisesViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ViewModelProvider</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="nc">ExercisesViewModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Exercise</span><span class="o">&gt;</span> <span class="n">exercises</span> <span class="o">=</span> <span class="n">exercisesViewModel</span><span class="o">.</span><span class="na">getAllExercisesList</span><span class="o">();</span>
        <span class="k">for</span><span class="o">(</span><span class="nc">Exercise</span> <span class="n">e</span> <span class="o">:</span> <span class="n">exercises</span><span class="o">)</span>
            <span class="k">if</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">id</span> <span class="o">==</span> <span class="n">exerciseID</span><span class="o">)</span>
                <span class="n">exercise</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
        
       	<span class="c1">// Texte der editTexts setzten</span>
        <span class="n">tExerciseName</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">exercise</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
        <span class="c1">// ...</span>
        
        <span class="n">fabDone</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// merken der neuen Werte</span>
				<span class="n">exercise</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">etExerciseName</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
				<span class="c1">// ...</span>
                
                <span class="c1">// hier wird das ViewModel zum aktualisieren der Werte in der Datenbank verwendet</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">exerciseID</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">exercisesViewModel</span><span class="o">.</span><span class="na">updateItems</span><span class="o">(</span><span class="n">exercise</span><span class="o">);</span> 
                <span class="k">else</span>
                    <span class="n">exercisesViewModel</span><span class="o">.</span><span class="na">insertItems</span><span class="o">(</span><span class="n">exercise</span><span class="o">);</span>

                <span class="n">setResult</span><span class="o">(</span><span class="no">RESULT_OK</span><span class="o">);</span>
                <span class="n">finish</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="c1">// Zurück ...</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">home</span><span class="o">:</span>
                <span class="n">finish</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// ... Rest des Code-Behind</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Die Kombination der beiden Dateien ergibt in etwa folgendes:</p>

<p><img src="/assets/images/AndroidAppReal/10_3_uebungenBeispiel.png" alt="10_3_uebungenBeispiel" /></p>

<h3 id="erste-erfolge">Erste Erfolge</h3>

<p>Mein erstes Ziel, eine funktionale Navigation zu implementieren wird mir dankenswerterweise dadurch erspart, dass es bereits ein Template mit einer “Navigation Drawer Activity” bereitgestellt wird.</p>

<p><img src="/assets/images/AndroidAppReal/1_menuStruktur.png" alt="1_menuStruktur" /></p>

<p>Allein dieses Menü besteht aus drei Dateien, die die verschiedenen Bereiche beschreiben.</p>

<p>Nachdem das erste Ziel überraschen schnell abgearbeitet werden konnte, habe ich dazu entschieden erst einmal den “Übungsteil” der App zu erstellen, schließlich macht eine Playlist ohne Übungen wenig Sinn.</p>

<p>Die meisten angekündigten Funktionen aus der Übungsübersicht habe ich bereits implementiert.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="/assets/images/AndroidAppReal/9_uebungenUbersicht.png" alt="9_uebungenUbersicht" /></td>
      <td><img src="/assets/images/AndroidAppReal/10_2_uebungenNeueAnlegen.png" alt="10_2_uebungenNeueAnlegen" /></td>
    </tr>
  </tbody>
</table>

<p>Oben kann nach einer Übung gesucht werden, mit einem normalen Touch kommt man in den Detail-Modus eines Datensatzes und ein langer Touch löst die Nachfrage aus, ob der Datensatz gelöscht werden soll. Unten rechts ist ein sogenannter FloatingActionButton, der es ermöglicht einen neuen Datensatz anzulegen. Nur das Abspielen der Übung fehlt noch.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="/assets/images/AndroidAppReal/9_uebungenUbersichtLoeschen.png" alt="9_uebungenUbersichtLoeschen" /></td>
      <td><img src="/assets/images/AndroidAppReal/9_uebungenUbersichtSuchen.png" alt="9_uebungenUbersichtSuchen" /></td>
    </tr>
  </tbody>
</table>

<p>Soviel erstmal zu meinem Fortschritt nach ca. 2,5 Tagen.</p>

<p>Der komplette Code ist auch auf <a href="https://github.com/FlorianSymmank/SportApp">GitHub</a> verfügbar.</p>

</div>



<div class="pagination">
  
  
    <a href="/2021-07-27/Sportapp-entwickeln-Tag-1" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <footer>
  <span>
    &copy; <time datetime="2021-07-29 19:53:55 +0200">2021</time> Florian Symmank. Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
